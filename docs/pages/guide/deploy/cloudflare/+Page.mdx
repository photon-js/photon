import { BetaWarning, InstallCommand } from '../../../../components'

<BetaWarning message="Cloudflare adapter is in alpha. Some features may be incomplete." />

Deploy your Photon application to Cloudflare Workers and Pages.

## Prerequisites

- [Cloudflare account](https://dash.cloudflare.com/sign-up)
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/)

```bash
npm install -g wrangler
wrangler login
```

## Installation

<InstallCommand packages="@photonjs/runtime @photonjs/cloudflare" title="Install the Cloudflare adapter:" />

## Configuration

### Vite Configuration

Add the Cloudflare adapter to your Vite config:

```ts
// vite.config.ts
import { photon } from '@photonjs/runtime/vite'
import { cloudflare } from '@photonjs/cloudflare/vite'

export default {
  plugins: [
    photon(),
    cloudflare()
  ]
}
```

### Wrangler Configuration

Create a `wrangler.toml` file:

```toml
name = "my-photon-app"
main = "photon:cloudflare:photon:server-entry"
compatibility_date = "2025-08-28"

[build]
command = "npm run build"

[[kv_namespaces]]
binding = "MY_KV"
id = "your-kv-namespace-id"

[vars]
ENVIRONMENT = "production"
```

## Deployment

### Preview

Test build output locally with Wrangler:

```bash
npm run build
wrangler dev
```

### Production

Deploy to Cloudflare:

```bash
npm run build
wrangler deploy
```

import{o as S,a as b}from"../chunks/chunk-Bv1JMj5z.js";import{a as h,u as k,b as m,j as t,p as u,R as T,c as f,d as p,e as C,r as g}from"../chunks/chunk-B8SD6Srz.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */function P(n){n=n.toLowerCase(),n=E(n);const e=n.split(/[^a-z0-9\u4E00-\u9FA5]+/).filter(Boolean).join("-");return e===""?null:e}function E(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function A(n){return h(n.includes("#"),{urlWithHash:n}),n.split("#")[1].split("-").map((s,r)=>r===0?L(s):s).join(" ")}function L(n){return n[0].toUpperCase()+n.slice(1)}function x({href:n,text:e,noBreadcrumb:i,doNotInferSectionTitle:s,noWarning:r,children:a}){const o=k();m(n.startsWith("/")||n.startsWith("#"),`<Link href /> prop \`href==='${n}'\` but should start with '/' or '#'`),m(!e||!a,"Cannot use both `text` or `children`"),e=e??a;const l=F({href:n,pageContext:o,doNotInferSectionTitle:s,noWarning:r});return e||(l?e=D({noBreadcrumb:i,...l}):e="LINK-TARGET-NOT-FOUND"),t.jsx("a",{href:n,children:e})}function D({noBreadcrumb:n,linkData:e,sectionTitle:i,isLinkOnSamePage:s}){const r=[];return e.linkBreadcrumb&&r.push(...(e.linkBreadcrumb??[]).slice().reverse().map(u)),r.push(u(e.title)),i&&r.push(i),n||s?r[r.length-1]:t.jsx(t.Fragment,{children:r.map((a,o)=>{const l=o===0?t.jsx(t.Fragment,{}):" > ";return t.jsxs(T.Fragment,{children:[l,a]},o)})})}function F({href:n,pageContext:e,doNotInferSectionTitle:i,noWarning:s}){const{hrefPathname:r,hrefHash:a}=R(n),o=j(r||e.urlPathname,{pageContext:e,noWarning:s});if(!o)return null;const l=o.url===e.urlPathname;r||h(l);let d=null;if(a){if(h(!a.startsWith("#")),l){const c=j(`#${a}`,{pageContext:e,noWarning:s});if(!c)return null;d=u(c.title)}else"sectionTitles"in o&&o.sectionTitles&&o.sectionTitles.forEach(c=>{P(c)===a&&(d=u(c))});if(!d){if(i)return f(!1,`Page section title not found for <Link href="\`${n}\`" doNotInferSectionTitle={true} />.`),null;d=t.jsx(t.Fragment,{children:A(n)})}}return{linkData:o,sectionTitle:d,isLinkOnSamePage:l}}function j(n,{pageContext:e,noWarning:i}){h(n.startsWith("/")||n.startsWith("#"));const{linksAll:s}=e.resolved,r=s.find(({url:a})=>n===a);return n.startsWith("#")?i||f(r,`Couldn't find ${n} in ${e.urlPathname}, does it exist?`):i||f(r,[`Couldn't find page with URL ${p.bold(n)}`,"— did you define it in",[p.cyan("docpress.config.js"),p.dim("#{"),p.cyan("headings"),p.dim(","),p.cyan("headingsDetached"),p.dim("}"),"?"].join("")].join(" ")),r??null}function R(n){let e=null,i=null;if(!n.includes("#"))i=n;else{const[s,...r]=n.split("#");s&&(i=s),e=r.join("#")}return h(i!==null||e!==null),h(i||e),e&&(e=e.split(":~:text")[0]),{hrefPathname:i,hrefHash:e}}function z({children:n,hideToggle:e=!1}){const[i,s]=C(),r=g.useRef(null);return g.useEffect(()=>{if(!r.current)return;const{top:o,el:l}=r.current,d=l.getBoundingClientRect().top-o;d!==0&&window.scrollBy(0,d),r.current=null},[i]),t.jsxs("div",{className:"code-snippets",children:[t.jsx("input",{type:"checkbox",name:"code-lang-toggle",className:"code-lang-toggle raised",style:{display:e?"none":void 0},checked:i==="ts",onChange:a,title:"Toggle language"}),n]});function a(o){const l=o.target;r.current={top:l.getBoundingClientRect().top,el:l},s(l.checked?"ts":"js")}}function H({children:n,...e}){return t.jsxs("pre",{...e,children:[!e["hide-menu"]&&t.jsx(I,{}),n]})}function I(){const[n,e]=g.useState(null),i=o=>{e(o),setTimeout(()=>{e(null)},900)},s=n===null?"Copy to clipboard":n?"Copied":"Failed",r=n===null?t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"black",strokeWidth:"2",children:[t.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}):n?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"#28a745",strokeWidth:"3",children:t.jsx("polyline",{points:"20 6 9 17 4 12"})}):"❌";return t.jsx("button",{className:"copy-button raised","aria-label":s,"data-label-position":"top-left",type:"button",onClick:a,children:r});async function a(o){let l,c=o.currentTarget.parentElement.textContent||"";c=M(c);try{await navigator.clipboard.writeText(c),l=!0}catch(w){console.error(w),l=!1}i(l)}}function M(n){return n.split(`
`).map(e=>e.trimEnd()).join(`
`)}const y=()=>({CodeSnippets:z,pre:n=>t.jsx(H,{...n})}),N=[{pageSectionId:"features",pageSectionLevel:2,pageSectionTitle:"Features"},{pageSectionId:"hmr",pageSectionLevel:3,pageSectionTitle:"HMR"},{pageSectionId:"code-splitting",pageSectionLevel:3,pageSectionTitle:"Code-splitting"},{pageSectionId:"vite-environment-api",pageSectionLevel:3,pageSectionTitle:"Vite Environment API"},{pageSectionId:"philosophy",pageSectionLevel:2,pageSectionTitle:"Philosophy"},{pageSectionId:"collaboration",pageSectionLevel:3,pageSectionTitle:"Collaboration"},{pageSectionId:"clear-separation-of-concerns",pageSectionLevel:3,pageSectionTitle:"Clear separation of concerns"}];function v(n){const e={a:"a",blockquote:"blockquote",code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...y(),...n.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"Photon is a next-generation infrastructure for deploying JavaScript servers."}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"For users:"})," use any server (Hono, Express.js, Fastify, ...) and deploy anywhere (Cloudflare, Vercel, Netlify, self-hosted, ...)."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"For frameworks:"})," easy and incremental Photon integration, with optional ",t.jsx(x,{href:"#collaboration",children:"tight-knit collaboration"}),"."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"For deployment providers:"})," add first-class integration to multiple frameworks at once, with optional ",t.jsx(x,{href:"#collaboration",children:"tight-knit collaboration"}),"."]}),`
`]}),`
`,t.jsx("h2",{id:"features",children:"Features"}),`
`,t.jsx(e.p,{children:"Photon is jam-packed with features:"}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Any server"}),`:
`,t.jsx(e.a,{href:"https://hono.dev/",children:"Hono"}),`,
`,t.jsx(e.a,{href:"https://expressjs.com/",children:"Express.js"}),`,
`,t.jsx(e.a,{href:"https://elysiajs.com/",children:"Elysia"}),`,
`,t.jsx(e.a,{href:"https://fastify.dev/",children:"Fastify"}),`,
`,t.jsx(e.a,{href:"https://h3.dev/",children:"H3"}),`,
`,t.jsx(e.a,{href:"https://srvx.h3.dev/",children:"Srvx"}),`,
`,t.jsx(e.a,{href:"https://github.com/hattipjs/hattip",children:"Hattip"}),"."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Any deployment"}),": Cloudflare, Vercel, self-hosting (e.g. AWS and VPS), and more is work-in-progress."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"HMR"}),": No more full server reload required."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Vite Environment API"}),": Develop against production runtimes (e.g. Cloudflare's ",t.jsx(e.code,{children:"workerd"}),")."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Code-splitting"}),": Per-route deployment to separate edge workers."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Zero-config"}),": Integrate your server and deployment with minimal configuration."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"TypeScript"}),": First-class TypeScript support."]}),`
`]}),`
`,t.jsx("h3",{id:"hmr",children:"HMR"}),`
`,t.jsx(e.p,{children:"Server-side HMR means that, if you change a server file, the server code is automatically updated: the next HTTP response will be generated by the updated code. No more full server reload required."}),`
`,t.jsxs(e.blockquote,{children:[`
`,t.jsx(e.p,{children:"This is experimental and doesn't always work: Photon sometimes still triggers a full server reload."}),`
`]}),`
`,t.jsxs(e.p,{children:["If HMR isn't what you want (for example if you modify the database connection) you can manually trigger a full server reload by pressing ",t.jsx(e.code,{children:"r + enter"}),"."]}),`
`,t.jsx("h3",{id:"code-splitting",children:"Code-splitting"}),`
`,t.jsx(e.p,{children:"To reduce cold starts, Photon supports server-side code splitting: each page has its own production bundle — each bundle is minimal and contains only what is needed to render that page."}),`
`,t.jsx(e.p,{children:"This means you can scale to hundreds of pages while keeping you server cold starts low."}),`
`,t.jsx("h3",{id:"vite-environment-api",children:"Vite Environment API"}),`
`,t.jsxs(e.p,{children:["Photon's Cloudflare integration uses ",t.jsx(e.a,{href:"https://blog.cloudflare.com/introducing-the-cloudflare-vite-plugin/",children:t.jsx(e.code,{children:"@cloudflare/vite-plugin"})}),", which runs the server-side of the user's app inside ",t.jsx(e.code,{children:"workerd"})," — the same runtime Cloudflare Workers uses in production."]}),`
`,t.jsx(e.p,{children:"This means the development environment is now a faithful representation of Cloudflare's production edge environment."}),`
`,t.jsxs(e.blockquote,{children:[`
`,t.jsxs(e.p,{children:["It's powered by ",t.jsx(e.a,{href:"https://vike.dev/blog/vite-6",children:"Vite's Environment API"}),", which enables Vite to run in a Node.js process while running the user's server code in another (non-Node.js) process such as ",t.jsx(e.code,{children:"workerd"}),"."]}),`
`]}),`
`,t.jsx("h2",{id:"philosophy",children:"Philosophy"}),`
`,t.jsx(e.p,{children:"We believe Photon is a step towards the future of JavaScript server integration and deployment."}),`
`,t.jsx("h3",{id:"collaboration",children:"Collaboration"}),`
`,t.jsx(e.p,{children:"Collaboration is key for a thriving ecosystem:"}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Framework authors:"})," we work with frameworks, pushing the envelope of what's possible."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Deployment providers:"})," we work with deployment providers for first-class, full-fledged deployment integrations."]}),`
`]}),`
`,t.jsx("h3",{id:"clear-separation-of-concerns",children:"Clear separation of concerns"}),`
`,t.jsx(e.p,{children:"Photon is hyper-focused — we don't re-implement features that are already handled by servers and frameworks."}),`
`,t.jsx(e.p,{children:"As a framework or deployment provider, you preserve full control over what makes your framework/deployment special."}),`
`,t.jsx(e.p,{children:"We use and advocate for web standards fostering interoperability."})]})}function U(n={}){const{wrapper:e}={...y(),...n.components};return e?t.jsx(e,{...n,children:t.jsx(v,{...n})}):v(n)}const B=Object.freeze(Object.defineProperty({__proto__:null,default:U,pageSectionsExport:N},Symbol.toStringTag,{value:"Module"})),ee={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/renderer/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:b}},onCreatePageContext:{type:"cumulative",definedAtData:[{filePathToShowToUser:"@brillout/docpress/renderer/onCreatePageContext",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:S}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/why/+Page.mdx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:B}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}}};export{ee as configValuesSerialized};

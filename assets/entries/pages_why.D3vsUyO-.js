import{o as S,a as b}from"../chunks/chunk-DmlV61Lp.js";import{a as u,u as k,b as m,j as n,p,R as T,c as f,d as h,e as P,r as g}from"../chunks/chunk-DXv6gYtq.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */function C(t){t=t.toLowerCase(),t=E(t);const e=t.split(/[^a-z0-9\u4E00-\u9FA5]+/).filter(Boolean).join("-");return e===""?null:e}function E(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function A(t){return u(t.includes("#"),{urlWithHash:t}),t.split("#")[1].split("-").map((o,i)=>i===0?D(o):o).join(" ")}function D(t){return t[0].toUpperCase()+t.slice(1)}function x({href:t,text:e,noBreadcrumb:r,doNotInferSectionTitle:o,noWarning:i,children:a}){const s=k();m(t.startsWith("/")||t.startsWith("#"),`<Link href /> prop \`href==='${t}'\` but should start with '/' or '#'`),m(!e||!a,"Cannot use both `text` or `children`"),e=e??a;const l=F({href:t,pageContext:s,doNotInferSectionTitle:o,noWarning:i});return e||(l?e=L({noBreadcrumb:r,...l}):e="LINK-TARGET-NOT-FOUND"),n.jsx("a",{href:t,children:e})}function L({noBreadcrumb:t,linkData:e,sectionTitle:r,isLinkOnSamePage:o}){const i=[];return e.linkBreadcrumb&&i.push(...(e.linkBreadcrumb??[]).slice().reverse().map(p)),i.push(p(e.title)),r&&i.push(r),t||o?i[i.length-1]:n.jsx(n.Fragment,{children:i.map((a,s)=>{const l=s===0?n.jsx(n.Fragment,{}):" > ";return n.jsxs(T.Fragment,{children:[l,a]},s)})})}function F({href:t,pageContext:e,doNotInferSectionTitle:r,noWarning:o}){const{hrefPathname:i,hrefHash:a}=z(t),s=j(i||e.urlPathname,{pageContext:e,noWarning:o});if(!s)return null;const l=s.url===e.urlPathname;i||u(l);let d=null;if(a){if(u(!a.startsWith("#")),l){const c=j(`#${a}`,{pageContext:e,noWarning:o});if(!c)return null;d=p(c.title)}else"sectionTitles"in s&&s.sectionTitles&&s.sectionTitles.forEach(c=>{C(c)===a&&(d=p(c))});if(!d){if(r)return f(!1,`Page section title not found for <Link href="\`${t}\`" doNotInferSectionTitle={true} />.`),null;d=n.jsx(n.Fragment,{children:A(t)})}}return{linkData:s,sectionTitle:d,isLinkOnSamePage:l}}function j(t,{pageContext:e,noWarning:r}){u(t.startsWith("/")||t.startsWith("#"));const{linksAll:o}=e.resolved,i=o.find(({url:a})=>t===a);return t.startsWith("#")?r||f(i,`Couldn't find ${t} in ${e.urlPathname}, does it exist?`):r||f(i,[`Couldn't find page with URL ${h.bold(t)}`,"— did you define it in",[h.cyan("docpress.config.js"),h.dim("#{"),h.cyan("headings"),h.dim(","),h.cyan("headingsDetached"),h.dim("}"),"?"].join("")].join(" ")),i??null}function z(t){let e=null,r=null;if(!t.includes("#"))r=t;else{const[o,...i]=t.split("#");o&&(r=o),e=i.join("#")}return u(r!==null||e!==null),u(r||e),e&&(e=e.split(":~:text")[0]),{hrefPathname:r,hrefHash:e}}function I({children:t,hideToggle:e=!1}){const[r,o]=P(),i=g.useRef(null);return g.useEffect(()=>{if(!i.current)return;const{top:s,el:l}=i.current,d=l.getBoundingClientRect().top-s;d!==0&&window.scrollBy(0,d),i.current=null},[r]),n.jsxs("div",{className:"code-snippets",children:[n.jsx("input",{type:"checkbox",name:"code-lang-toggle",className:"code-lang-toggle raised",style:{display:e?"none":void 0},checked:r==="ts",onChange:a,title:"Toggle language"}),t]});function a(s){const l=s.target;i.current={top:l.getBoundingClientRect().top,el:l},o(l.checked?"ts":"js")}}function R({children:t,...e}){return n.jsxs("pre",{...e,children:[!e["hide-menu"]&&n.jsx(B,{}),t]})}function B(){const[t,e]=g.useState(null),r=s=>{e(s),setTimeout(()=>{e(null)},900)},o=t===null?"Copy to clipboard":t?"Copied":"Failed",i=t===null?n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"black",strokeWidth:"2",children:[n.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),n.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}):t?n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"#28a745",strokeWidth:"3",children:n.jsx("polyline",{points:"20 6 9 17 4 12"})}):"❌";return n.jsx("button",{className:"copy-button raised","aria-label":o,"data-label-position":"top-left",type:"button",onClick:a,children:i});async function a(s){let l,c=s.currentTarget.parentElement.textContent||"";c=H(c);try{await navigator.clipboard.writeText(c),l=!0}catch(w){console.error(w),l=!1}r(l)}}function H(t){return t.split(`
`).map(e=>e.trimEnd()).join(`
`)}const y=()=>({CodeSnippets:I,pre:t=>n.jsx(R,{...t})}),M=[{pageSectionId:"features",pageSectionLevel:2,pageSectionTitle:"Features"},{pageSectionId:"standalone",pageSectionLevel:3,pageSectionTitle:"Standalone"},{pageSectionId:"hmr",pageSectionLevel:3,pageSectionTitle:"HMR"},{pageSectionId:"code-splitting",pageSectionLevel:3,pageSectionTitle:"Code-splitting"},{pageSectionId:"vite-environment-api",pageSectionLevel:3,pageSectionTitle:"Vite Environment API"},{pageSectionId:"built-in-server",pageSectionLevel:3,pageSectionTitle:"Built-in server"},{pageSectionId:"philosophy",pageSectionLevel:2,pageSectionTitle:"Philosophy"},{pageSectionId:"collaboration",pageSectionLevel:3,pageSectionTitle:"Collaboration"},{pageSectionId:"clear-separation-of-concerns",pageSectionLevel:3,pageSectionTitle:"Clear separation of concerns"}];function v(t){const e={a:"a",blockquote:"blockquote",code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...y(),...t.components};return n.jsxs(n.Fragment,{children:[n.jsx(e.p,{children:"Photon is a next-generation infrastructure for deploying JavaScript servers."}),`
`,n.jsxs(e.ul,{children:[`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"For users:"})," use any server (Hono, Express.js, Fastify, ...) and deploy anywhere (Cloudflare, Vercel, Netlify, self-hosted, ...)."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"For frameworks:"})," easy and incremental Photon integration, with optional ",n.jsx(x,{href:"#collaboration",children:"tight-knit collaboration"}),"."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"For deployment providers:"})," add first-class integration to multiple frameworks at once, with optional ",n.jsx(x,{href:"#collaboration",children:"tight-knit collaboration"}),"."]}),`
`]}),`
`,n.jsx("h2",{id:"features",children:"Features"}),`
`,n.jsx(e.p,{children:"Photon is jam-packed with features:"}),`
`,n.jsxs(e.ul,{children:[`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Any server"}),`:
`,n.jsx(e.a,{href:"https://hono.dev/",children:"Hono"}),`,
`,n.jsx(e.a,{href:"https://expressjs.com/",children:"Express.js"}),`,
`,n.jsx(e.a,{href:"https://elysiajs.com/",children:"Elysia"}),`,
`,n.jsx(e.a,{href:"https://fastify.dev/",children:"Fastify"}),`,
`,n.jsx(e.a,{href:"https://h3.dev/",children:"H3"}),`,
`,n.jsx(e.a,{href:"https://srvx.h3.dev/",children:"Srvx"}),`,
`,n.jsx(e.a,{href:"https://github.com/hattipjs/hattip",children:"Hattip"}),"."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Any deployment"}),": Cloudflare, Vercel, self-hosting (e.g. AWS and VPS), and more is work-in-progress."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"HMR"}),": No more full server reload needed."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Vite Environment API"}),": Develop against production runtimes (e.g. Cloudflare's ",n.jsx(e.code,{children:"workerd"}),")."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Code-splitting"}),": Per-route deployment to separate edge workers."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Zero-config"}),": Integrate your server and deployment with minimal configuration."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Built-in server"}),": Photon comes with a built-in server for zero-config use (users can use their own instead)."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Bun"}),": First-class support (runs natively through Bun’s ",n.jsx(e.code,{children:"Bun.serve"}),")."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Deno"}),": First-class support (runs natively through Deno’s built-in HTTP server)."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"Standalone"}),": Self-contained ",n.jsx(e.code,{children:"dist/"})," (no ",n.jsx(e.code,{children:"node_modules/"})," needed), massively reducing disk usage (important for Docker images)."]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"TypeScript"}),": First-class support."]}),`
`]}),`
`,n.jsx("h3",{id:"standalone",children:"Standalone"}),`
`,n.jsxs(e.p,{children:["With ",n.jsx(e.code,{children:"standalone: true"}),", the build output directory (",n.jsx(e.a,{href:"https://vite.dev/config/build-options.html#build-outdir",children:n.jsx(e.code,{children:"dist/"})}),") contains everything needed for deployment. This means that, in production, only the ",n.jsx(e.code,{children:"dist/"})," directory is required (you can remove ",n.jsx(e.code,{children:"node_modules/"})," and skip ",n.jsx(e.code,{children:"$ npm install"}),")."]}),`
`,n.jsxs(e.p,{children:["Skipping ",n.jsx(e.code,{children:"node_modules/"})," massively reduces disk usage in production, which can be important, for example to ",n.jsx(e.a,{href:"https://github.com/photon-js/photon/issues/42#issuecomment-3549657194",children:"reduce the size of Docker images"}),"."]}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsx(e.p,{children:"It's an advanced feature — more powerful than just using a bundler — and supports:"}),`
`,n.jsxs(e.ul,{children:[`
`,n.jsx(e.li,{children:"Native dependencies."}),`
`,n.jsxs(e.li,{children:["File references (e.g. ",n.jsx(e.code,{children:"fs.readFile()"}),")."]}),`
`,n.jsx(e.li,{children:"Multiple versions of the same package."}),`
`,n.jsxs(e.li,{children:["All known ",n.jsx(e.code,{children:"node_modules/"})," hierarchies (npm, pnpm, Bun, yarn)."]}),`
`]}),`
`,n.jsxs(e.p,{children:["It uses ",n.jsxs(e.a,{href:"https://github.com/vercel/nft",children:["Vercel's ",n.jsx(e.code,{children:"nft"})]})," to trace dependencies, ",n.jsx(e.a,{href:"https://github.com/rolldown/rolldown",children:"Rolldown"})," to bundle code, while preserving the ",n.jsx(e.code,{children:"node_modules/"})," hierarchy (needed for multiple version support)."]}),`
`]}),`
`,n.jsx("h3",{id:"hmr",children:"HMR"}),`
`,n.jsx(e.p,{children:"Server-side HMR means that, if you change a server file, the server code is automatically updated: the next HTTP response will be generated by the updated code. No more full server reload required."}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsx(e.p,{children:"This is experimental and doesn't always work: Photon sometimes still triggers a full server reload."}),`
`]}),`
`,n.jsxs(e.p,{children:["If HMR isn't what you want (for example if you modify the database connection) you can manually trigger a full server reload by pressing ",n.jsx(e.code,{children:"r + enter"}),"."]}),`
`,n.jsx("h3",{id:"code-splitting",children:"Code-splitting"}),`
`,n.jsx(e.p,{children:"To reduce cold starts, Photon supports server-side code splitting: each page has its own production bundle — each bundle is minimal and contains only what is needed to render that page."}),`
`,n.jsx(e.p,{children:"This means you can scale to hundreds of pages while keeping you server cold starts low."}),`
`,n.jsx("h3",{id:"vite-environment-api",children:"Vite Environment API"}),`
`,n.jsxs(e.p,{children:["Photon's Cloudflare integration uses ",n.jsx(e.a,{href:"https://blog.cloudflare.com/introducing-the-cloudflare-vite-plugin/",children:n.jsx(e.code,{children:"@cloudflare/vite-plugin"})}),", which runs the server-side of the user's app inside ",n.jsx(e.code,{children:"workerd"})," — the same runtime Cloudflare Workers uses in production."]}),`
`,n.jsx(e.p,{children:"This means the development environment is now a faithful representation of Cloudflare's production edge environment."}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["It's powered by ",n.jsx(e.a,{href:"https://vike.dev/blog/vite-6",children:"Vite's Environment API"}),", which enables Vite to run in a Node.js process while running the user's server code in another (non-Node.js) process such as ",n.jsx(e.code,{children:"workerd"}),"."]}),`
`]}),`
`,n.jsx("h3",{id:"built-in-server",children:"Built-in server"}),`
`,n.jsxs(e.p,{children:["By default, Photon uses a built-in server that supports basic features like SSR. If the user needs additional server functionalities (e.g. ",n.jsx(e.a,{href:"https://hono.dev/examples/file-upload",children:"file uploads"}),"), the user can create its own server (Hono/Express.js/...) instead."]}),`
`,n.jsx("h2",{id:"philosophy",children:"Philosophy"}),`
`,n.jsx(e.p,{children:"Collaboration and a clear separation of concerns are paramount for a thriving ecosystem."}),`
`,n.jsx("h3",{id:"collaboration",children:"Collaboration"}),`
`,n.jsx(e.p,{children:"We work with frameworks and deployment providers for full-fledged and seamless integrations while pushing the envelope of what's possible."}),`
`,n.jsx("h3",{id:"clear-separation-of-concerns",children:"Clear separation of concerns"}),`
`,n.jsx(e.p,{children:"Photon is hyper-focused — we don't re-implement what servers and frameworks already provide."}),`
`,n.jsx(e.p,{children:"As a framework or deployment provider, you preserve full control over what makes your framework/deployment special."}),`
`,n.jsx(e.p,{children:"We advocate web standards and conventions that foster interoperability beyond Photon and Vite."})]})}function N(t={}){const{wrapper:e}={...y(),...t.components};return e?n.jsx(e,{...t,children:n.jsx(v,{...t})}):v(t)}const U=Object.freeze(Object.defineProperty({__proto__:null,default:N,pageSectionsExport:M},Symbol.toStringTag,{value:"Module"})),ee={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},guardEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/renderer/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:b}},onCreatePageContext:{type:"cumulative",definedAtData:[{filePathToShowToUser:"@brillout/docpress/renderer/onCreatePageContext",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:S}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/why/+Page.mdx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:U}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}}};export{ee as configValuesSerialized};
